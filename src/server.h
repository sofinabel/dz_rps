/**
 * @file server.h
 * @brief Заголовочный файл серверной части приложения 
 */

#pragma once

#include "protocol.h"

namespace Server {

/**
 * @brief Запускает сервер в режиме ожидания клиента и проведения игры
 *
 * Выполняет:
 *  - загрузку списка загадок из CSV-файла
 *  - ожидание запроса клиента (MSG_REQUEST)
 *  - выбор случайной загадки и отправку её клиенту (MSG_RIDDLE)
 *  - цикл обработки ходов клиента:
 *      - MSG_GUESS: проверка ответа, ограничение по попыткам
 *      - MSG_HINT: выдача подсказок (до двух)
 *      - MSG_GIVEUP: досрочная выдача правильного ответа
 *  - завершение соединения и сокета после окончания игры
 *
 * @param port Порт для прослушивания UDP-запросов
 * @param riddleFilePath Путь к CSV-файлу с загадками
 * @param testMode Если true — отключает ограничение числа попыток
 * @return true при успешном завершении игры, false при ошибках
 */

bool start(uint16_t port, const std::string &riddleFilePath, bool testMode = false);

}

